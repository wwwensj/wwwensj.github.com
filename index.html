
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Wensj's Blog</title>
	<meta name="author" content="Wensj">

	
	<meta name="description" content="May 21st, 2015 iOS Comments iOS常用开源库 这里记录的都是一些比较好的 iOS 开源库，涉及各个方面的内容，感觉这些开源的作者。此文章将持续更新 网络请求 1、AFNetworking 网络请求的封装，相信不用多说，开发过iOS的都应该会知道； 2、 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Wensj's Blog" type="application/atom+xml">
	
	<link rel="canonical" href="http://wwwensj.github.com/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		document.write("<img src='/images/avatar.jpg' alt='Profile Picture' style='width: 160px;' />");
	</script>
</div>
<h1><a href="/">Wensj's Blog</a></h1>
<p class="subtitle">天道酬勤，记录点滴，爱生活.</p>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">所有文章</a></li>
  <li><a href="/about">关于我</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="weibo" href="http://www.weibo.com/qq100100" title="Weibo">Weibo</a>
		
		
		
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
<hgroup>
<!--  <h1><a href="/">Wensj's Blog</a></h1>
  
    <h2>天道酬勤，记录点滴，爱生活.</h2>
  
-->
<p class="subtitle">
Your work is going to fill a large part of your life, and the only way to be truly satisfied is to do what you believe is great work.
</p>
<p class="subtitle" style="text-align: right;">-- Steve Jobs</p>
</hgroup>

</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2015-05-21T10:44:02+08:00" data-updated="true" itemprop="datePublished">May 21<span>st</span>, 2015</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2015/05/21/ioschang-yong-kai-yuan-ku/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2015/05/21/ioschang-yong-kai-yuan-ku/" itemprop="url">iOS常用开源库</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>这里记录的都是一些比较好的 <code>iOS</code> 开源库，涉及各个方面的内容，感觉这些开源的作者。此文章将<strong>持续更新</strong></p>

<h1>网络请求</h1>

<p>1、<strong><a href="https://github.com/AFNetworking/AFNetworking">AFNetworking</a></strong> 网络请求的封装，相信不用多说，开发过<code>iOS</code>的都应该会知道；</p>

<p>2、<strong><a href="https://github.com/yuantiku/YTKNetwork">YTKNetwork</a></strong> <code>iOS</code>大牛唐巧出口，官方介绍:YTKNetwork 是猿题库 iOS 研发团队基于 AFNetworking 封装的 iOS 网络库，其实现了一套 High Level 的 API，提供了更高层次的网络访问抽象；</p>

<h1>效果类</h1>

<p>1、<strong><a href="https://github.com/SeniorZhai/ScoreBoard">ScoreBoard</a></strong> 数字滚动变化，圆形进度条；</p>

<p>2、<strong><a href="https://github.com/mikeMTOL/UIBarButtonItem-Badge">UIBarButtonItem-Badge</a></strong> <code>UIBarButtonItem</code> 和 <code>UIButton</code> 添加气泡显示；</p>

<p>3、<strong><a href="https://github.com/ChrisXu1221/CXPhotoBrowser">CXPhotoBrowser</a></strong> 一个图片浏览的库；</p>

<p>4、<strong><a href="https://github.com/azxfire/MJPhotoBrowser">MJPhotoBrowser</a></strong> 一个图片浏览的库；</p>

<p>5、<strong><a href="https://github.com/mwaterfall/MWPhotoBrowser">MWPhotoBrowser</a></strong> 一个图片浏览的库；</p>

<h1>UITableView</h1>

<p>1、<strong><a href="https://github.com/forkingdog/UITableView-FDTemplateLayoutCell">UITableView-FDTemplateLayoutCell</a></strong> 优化UITableViewCell高度计算，以比较简单的方式，支持<code>iOS6.0+</code>,并且性能得到不少的提升，需要了解原理可看这篇<a href="http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/">博文</a></p>

<h1>图片加载</h1>

<p>1、<strong><a href="https://github.com/rs/SDWebImage">SDWebImage</a></strong> 这个相信也不用多说，图片网络请求封装，之前也有相关文章与其它库进行对比，性能不错；</p>

<h1>开发工具、脚本</h1>

<p>1、<strong><a href="https://github.com/krzysztofzablocki/KZBootstrap">KZBootstrap</a></strong> 一个<code>iOS</code>项目引导程序；</p>

<p>2、<strong><a href="https://github.com/kejinlu/capimage">capimage</a></strong>一个使用python的PIL库写的脚本，用于将一个普通的图片去除重复部分生成一个可伸缩的图片（resizable image），这样使得图片资源的使用更加灵活和节省空间；</p>

<h1>账号接入</h1>

<p>1、<strong><a href="https://github.com/nst/STTwitter">STTwitter</a></strong> 一个封装了Twitter官方REST Api的库，目前Twitter官方本身也有自身的<code>iOS SDK</code>,通过<code>Fabric</code>客户端可以进行配置安装；</p>

<h1>支付接入</h1>

<p>1、<strong><a href="https://github.com/paypal/PayPal-iOS-SDK">PayPal-iOS-SDK</a></strong> <code>PayPal-iOS-SDK</code>接入的官方示例；</p>

<h1>扩展</h1>

<p>1、<strong><a href="https://github.com/uacaps/NSObject-ObjectMap">NSObject-ObjectMap</a></strong> 是一个能将<code>JSON</code>或<code>XML</code>等格式的数据直接转换成想要的对象;</p>

<h1>完整项目</h1>

<p>1、<strong><a href="https://coding.net/u/coding/p/Coding-iOS/git">Coding-iOS</a></strong> 一个完整的<code>iOS</code>客户端源码，更新频繁，涉及的东西比较多，值得学习；</p>

<h1>问题类</h1>

<p>1、<strong><a href="https://github.com/Xummer/ColorDifferenceDemo">ColorDifferenceDemo</a></strong> Xcode自带取色器与<code>UIColor</code>有色差的解决办法；</p>

<h1>其它</h1>

<p>1、<strong><a href="https://github.com/jyr/MNPP">MNPP</a></strong> 一键安装一个高性能的<code>Web Server</code>,<code>MNPP</code>是Mac + Nginx + Percona + PHP 的组合简称；</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-10-23T00:31:26+08:00" data-updated="true" itemprop="datePublished">Oct 23<span>rd</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/du-shu-bi-ji/'>读书笔记</a>


</div>
		
			<span class="comments"><a href="/blog/2014/10/23/%3C%3Czhou-hong-yi-zi-shu-wo-de-hu-lian-wang-fang-fa-lun-%3E%3Edu-shu-zhai-yao/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/10/23/%3C%3Czhou-hong-yi-zi-shu-wo-de-hu-lian-wang-fang-fa-lun-%3E%3Edu-shu-zhai-yao/" itemprop="url"><<周鸿祎自述:我的互联网方法论>>读书摘要</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>小插曲</h3>

<p>首先纠正 <code>周鸿祎</code> 这三个字的读法，开始我都是以为是读 <code>zhou hong wei</code>，值得最近同事才提醒，最后一个字不读 <code>wei</code>，读 <code>yi</code>，才发现，我错了好多年，而且一直这么叫，也好像没人帮我纠正，也没人说我读错了，因为我说 <code>zhou hong wei</code> 时，他们都知道我说谁。</p>

<h3>小抱怨</h3>

<p>书是在京东买的电子书，京东的阅读客户端真心不好用，基本的选内容做笔记都不能用。另外，电子书还是错别字，绝对要给减分。</p>

<h3>我的感受</h3>

<p>这本书都是我在上班坐地铁时看的，简单而快速地看完了，可能有些细节看得不认真，这里纯粹记录下个人感受而已：</p>

<ul>
<li>1、部分语句重复太多次，比较啰嗦，例如讲到 <code>360</code> 开始做杀毒时，好多传统厂商不看好之类的；</li>
<li>2、为 <code>360</code> 曾经作为流氓软件开脱，虽然 <code>360</code> 确实从用户角度解体了不少问题，但曾经是 <code>流氓王</code> 是不可否认的事实。另外，现在好多对电脑不懂的人使用电脑时，莫名其秒地会装上了 <code>360</code> 好多套装软件，我身边就有人这样，我问她为为什么装这么多安全软件，她说自己都不知道，按了几下就装上了。这就导致了两个问题：一是用户不了解电脑的情况下装了一大堆东西；二是电脑配置本来就不高，装上后卡得半死。那么问题来了：这是保护用户吗？</li>
<li>3、里面有不少场景说别人用的也是 <code>360</code> 这套模式，说得好像是 <code>360</code> 发明的，别人跟风一样。拜托，用你第1章里面的话说，这是因为 <code>趋势</code>；</li>
<li>4、很赞同里面说的 <code>360</code> 在解决用户体检方面的动作，据我曾经作为 <code>360</code> 一名忠实用户，在用户体验这方面确实做得很好，把杀毒简单化、易操作、易明白；</li>
<li>5、赞同里面说的创业公司应该先减法，再加法，而不是普遍认为的先加法、再减法；</li>
<li>6、赞同里面说的创业公司应该解决大公司没解决的一个小点的问题，而且前期不宜太高调让别人或媒体知道，否则会惊醒大公司，被它们复制并捆绑推广，毁了自己；</li>
<li>7、赞同互联网思维的说法，传统行业卖出了东西，巴不得都不用联系用户，因为用户买了后再联系，一般都是找麻烦（售后、退货）等。互联网卖出一个东西，与用户的关系才刚开始。互联网行业用户更换商家的成本极低，鼠标点击下就可以了；</li>
<li>8、创业不能一开始想着盈利、发财，一般开始这样想的，都活不下去。创业应该有要情怀、梦想、想着解决用户的问题，产品要有灵魂；</li>
<li>9、创业者开始可能看不清方向，必须快速推出产品，获取用户反馈，并快速改进；</li>
<li>10、像 <code>360</code> 公司，根本没有布局的说法，只是一步步解决用户的问题，慢慢发展起来了，布局一说都是马后炮的说法。</li>
</ul>


<p><strong>“上面的内容是看完后回忆写出来的，并不是一边看一边记录的，可能有些点没想起来，都是京东破阅读客户端不能做笔记惹的祸”</strong></p>

<h3>原文的精彩语句</h3>

<p>下面是我看完后快速翻一下书，找出来的觉得讲得比较好的语句：</p>

<ul>
<li>1、任何企业都可以找最强的竞争对手打，但有一个对手你是打不过的，那就是趋势。趋势一旦爆发，就不会是一种线性的发展。它会积蓄力量于无形，最后突然爆发出雪崩效应。任何不愿意改变的力量都会在雪崩面前被毁灭，被市场边缘化。</li>
<li>2、混沌理论最形象的比喻是“蝴蝶效应”：一只南美洲亚马河流域热带雨林中的蝴蝶，偶尔扇动几下翅膀，可以在两周以后引起美国得克萨斯州的一场龙卷风。</li>
<li>3、有人说这是布局，我说没有人能聪明到高瞻远瞩，看到五年后发生的事情。所有的布局，都只不过是马后炮而已。</li>
<li>4、大的企业会有各种创新研究院，把它作为重要的战略规划之一。我觉得这都没有问题，但不少企业的创新研究院有着远大的抱负，非要搞出一个石破天惊和令人瞠目、赞叹不已的创新技术出来不可，否则就不好意思自称创新。我觉得这就陷入了一种误区。</li>
<li>5、商业模式不是赚钱模式。它至少包含四方面的内容：产品模式、用户模式、推广模式，最后才是收入模式。</li>
<li>6、作为创业公司，一定要找到对产品需求最强烈的目标用户。</li>
<li>7、在互联网里，创业者如果志向远大，不是满脑子想着赚几个小钱，而是一定要知道商业模式的本质到底是什么，也需要从谷歌的故事里学会一个道理：没有用户价值，就没有商业价值。</li>
<li>8、互联网赢利三种模式：第一种模式特别传统，就是利用互联网卖东西；第二种模式就是依靠广告收入；第三种就是以网游为代表的增值服务。</li>
<li>9、好的互联网产品总结起来都有两个特性：第一，它要能在一个点上打动用户；第二，它一定是在持续改进、持续运营。这就是互联网产品的一个魅力。</li>
<li>10、无论你的想法高明与否，我认为都不如用户的选择高明，所以任何美妙的想法，都不如先把它简单地做出一点点，拿到市场上做实验：一旦对了，你马上能看到增长，并能迅速跟进；一旦不对，你调整的成本也很低。</li>
<li>11、颠覆式创新都不是敲锣打鼓出来的，而是隐藏在一片的噪声里。它是代表未来趋势的一个信号，但你去通常看不到、看不懂、看不清。所以，一定不能以一种藐视的态度看待新生事物。它可能满身缺点，但是颠覆你的东西，不需要做到十项佳能。它只要在一个点上追求极致，远远超过你，这就足够了。</li>
<li>12、创新形式有三种：第一种很难发生，那就是发明；第二种是商业模式上创新，就是把贵的东西做成便宜的，收费的做成免费的；第三种是从体验上创新，就是把复杂难用的东西变简单，把笨重的东西变便携。</li>
<li>13、商业的本质就是让人性得到释放，颠覆式创新也不例外，归根结底就是怎样满足人性。</li>
<li>14、用户选择产品，目的其实很简单，就是不要让他动脑子，不用让他费力，就能帮助他解决问题。</li>
<li>15、在计算机市场上，经常上演的是“次优者胜”，因为在占据市场主流地位在大公司不注重“次优者”，没有看到“次优者”打动消费者的那一个甜点。结果，在大公司的眼皮底下，“次优者”会迅速占领市场，形成事实上的标准。</li>
<li>16、颠覆式创新刚出来都是屌丝的市场，没有一种颠覆式创新刚出来就走高富帅和白富美路线。</li>
<li>17、破坏和颠覆，都是强调打破原有的平衡，建立新秩序。</li>
<li>18、巴菲特有一句名言：别人贪婪时我恐惧，别人恐惧时我贪婪。</li>
<li>19、当你面对强对手的时候，一定不要按照它的节拍跳舞，按照它的节拍跳舞你就死定了。你要想办法通过反向思维，通过逆向操作，在用户体验和商业模式上创造一种新的游戏规则。</li>
<li>20、齐白石讲过一句话：“学我者生，似我者死”。</li>
<li>21、如果你心里想着要颠覆巨头，第一一定不要大声说出来，第二一定要打侧翼战。</li>
<li>22、《连线》杂志主编凯文.凯利早就预言说，未来的硬件一定是免费的。</li>
<li>23、免费的本质是什么？是对商业模式的颠覆。</li>
<li>24、超出预期的体验，才是真正的客户体验。</li>
<li>25、我一直说，好的用户体验，要像针扎一样，给用户珍上刺激。那么这个体验就不能高大全，而是一定要把压强集中在一点，形成聚集的合力。这就如同高手对决，伤其十指，不如断其一指。</li>
<li>26、在进行微创新的时候，很重要的一点就是不要老想着做平台。无论创业公司，还是转型互联网的传统企业，最忌讳就是一上来就冲着宏大的平台化思维做，因为用户不会因为你做了一个平台就接受你的产品。</li>
<li>27、我讲的微创新一直强调从用户出发，做用户可以感知的东西。</li>
<li>28、有两点很关键：第一从小处着眼，贴近用户需求心理；第二要小步快跑，快速出击，不断试错。我把这两点称为互联网上的“微创新”规律。</li>
<li>29、一件小事，你把它做到世界第一，做到了极致，就是一件大事。</li>
<li>30、关于产品，我提两个数字概念。第一，产品刚出来的时候最不重要，哪怕第一天有1000个用户，第二天有2000个用户，第三天有3000个用户，第四天有5000个用户，这就是一条健康的曲线。但如果我们花很多钱做推广，结果第一天有1万个用户，第二天还是1万个用户，接着第三天8000，第四天5000。大家会更加喜欢哪条曲线？肯定是第一天增长曲线。所以，做产品不要在乎绝对数，而是要关注相对的增加趋势。第二个数字，就是产品有很多个环节，如果满分是1分，但每个环节我们都只做到0.8。你以为产品出来就是0.8分？错了，是0.8x0.8x0.8，总分是0.51。功能越多，数字就越小，产品失败得就越快。所以，功能更贵精，不贵多，要在每一个点上做到极致。</li>
<li>31、微创新最容易犯的错误就是不聚焦。微创新在在乎做很多功能，而是一定要找一个点，把有限的力量聚焦在一个点上才能形成突破，就是所谓的“压强原则”。</li>
<li>32、微量什么算微创新，其实有一个很简单的标准：用户会不会用最屌丝的语言在用户间流传。</li>
<li>33、互联网产品有几个容易被忽视的特点。第一，互联网产品要有一个灵魂，要符合相关领域的游戏规则，能打动用户的心。第二，互联网产品需要不断运营、持续打磨。好产品是运营出来的，不是开发出来的。第三点，大家都说产品要做专注和极致，在产品方向上，一定要先学会做减法，而不是做加法。</li>
<li>34、无论是马化腾、张小龙，都说要像小白一样思考。</li>
<li>35、中国有句古话，叫作“铁打的营盘流水的兵”。</li>
<li>36、建设一支优秀的团队，我认为万变不离其宗：第一，不要以发财为目标，一定要有某种程序的理想主义情怀。第二，财散人聚，要有激励机制，把大家的利益捆绑在一起。第三，解决新老交替的问题，留一部分利益给未来。</li>
<li>37、扁平化和小而美符合互联网时代技术更新快、产品需要小步快跑的需要。</li>
<li>38、乔布斯说过一句经典的话“Stay hungry, stay foolish”（求知若饥，虚心若愚）。??? 真是他说的？</li>
</ul>


<h3>文中提到的书籍</h3>

<ul>
<li>1、&lt;&lt;营销战>> 或 &lt;&lt;商战>></li>
<li>2、&lt;&lt;创新者的窘境>></li>
<li>3、&lt;&lt;创新者的解答>></li>
<li>4、&lt;&lt;柔道战略>></li>
<li>5、&lt;&lt;定位>></li>
<li>6、&lt;&lt;商业秀>></li>
<li>7、&lt;&lt;一网打尽>></li>
<li>8、&lt;&lt;精益创业>></li>
</ul>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-10-22T22:30:17+08:00" data-updated="true" itemprop="datePublished">Oct 22<span>nd</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/github/'>Github</a>


</div>
		
			<span class="comments"><a href="/blog/2014/10/22/yong-octopressmian-fei-da-jian-githubbo-ke/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/10/22/yong-octopressmian-fei-da-jian-githubbo-ke/" itemprop="url">用Octopress免费搭建Github博客</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>之前使用 <a href="http://octopress.org/">Octopress</a> 搭建的 <a href="https://github.com">Github</a> 博客只写了几篇文章，后来一直没用，最近重新用起来时，发现有不少问题，又要重新找网上文章去搭建，这里我记录一下搭建的过程。</p>

<h3>简介</h3>

<p><a href="http://octopress.org/">Octopress</a> 利用 <a href="http://github.com/mojombo/jekyll">Jekyll</a> 博客引擎开发的博客系统，生成静态的 Html 页面，以一个项目的形式上传至有约定名称的 <a href="https://github.com">Github</a> 上，使其在 <code>Github</code> 上以网页的形式展示，由于 <code>Github</code> 公开项目托管是免费的，因此相当于免费搭建了一个博客，那这个过程是怎样的？要安装什么软件？用什么形式写博客？怎样绑定自己的域名？下面都能解决你的问题。</p>

<h3>软件安装</h3>

<p>由于我使用的是苹果的 <code>OS X</code> 系统，因此这里说的也是针对苹果系统说的。</p>

<ul>
<li>1、<strong>安装 Ruby(可选)</strong><br/>
查看系统已经安装 <code>Ruby</code>,可在 <code>Terminal</code> 使用以下命令</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby --version // 查看 ruby 的版本</span></code></pre></td></tr></table></div></figure>


<p>如果发现已经安装，则直接进入第 <code>2</code> 步即可。</p>

<p>Octopress 依赖 Ruby 环境，我们需要先安装 RVM(Ruby Version Manager,用于安装和管理 Ruby 的)，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -L https://get.rvm.io | bash -s stable --ruby</span></code></pre></td></tr></table></div></figure>


<p>安装后，则安装 Ruby 2.0.0(目前最新是这个版本，网上好多文章是让安装 1.9.3 的)，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm install 2.0.0
</span><span class='line'>rvm use 2.0.0
</span><span class='line'>rvm rubygems latest</span></code></pre></td></tr></table></div></figure>


<p>安装完成后，使用以下如命令查看是否安装完成:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby --version</span></code></pre></td></tr></table></div></figure>


<p>Octopress 官网也有介绍安装 Ruby的，<a href="http://octopress.org/docs/setup/rvm/">猛戳传送门</a>。</p>

<ul>
<li>2、<strong>安装 Octopress</strong></li>
</ul>


<p>使用 <code>git</code> 命令把 <code>octopress</code> 从 <code>Github</code> clone 到本机，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>cd octopress //进入 octopress 目录</span></code></pre></td></tr></table></div></figure>


<p>clone 完后，安装依赖项:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo gem install bundler
</span><span class='line'>rbenv rehash    # If you use rbenv, rehash to be able to run the bundle command
</span><span class='line'>bundle install</span></code></pre></td></tr></table></div></figure>


<p>完成后，安装 Octopress 主题，<strong>“如果Ruby版本高于0.9.2时，运行rake时需要有前面加上 bundle exec”</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake insall 
</span><span class='line'>或
</span><span class='line'>bundle exec rake install</span></code></pre></td></tr></table></div></figure>


<p><strong>“这里 bundle install 可能会报错，例如什么 RedCloth 4.2.9 安装出错，Native Extension 安装出问题等，极有可能是因此没安装 xcode-select”</strong>，那么要安装完 <code>xcode-select</code> 后再进行 <code>bundle install</code> 的安装，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>xcode-select --install</span></code></pre></td></tr></table></div></figure>


<p>以上的安装过程，<code>Octopress</code> 官方也有指导，<a href="http://octopress.org/docs/setup/">猛戳传送门</a>。</p>

<ul>
<li>3、<strong>配置Octopress</strong></li>
</ul>


<p>配置可直接看官方教程 <a href="http://blog.devtang.com/blog/2012/02/10/setup-blog-based-on-github/">Configuring Octopress</a>，其中还有点小技巧，可参考大神 <code>唐巧</code> 的文章 <a href="http://blog.devtang.com/blog/2012/02/10/setup-blog-based-on-github/">象写程序一样写博客：搭建基于github的博客</a>。</p>

<ul>
<li>4、<strong>部署到Github</strong></li>
</ul>


<p>Github的 <a href="http://pages.github.com/">Page Service</a> 可免费托管代码，还可以绑定自己的域名。</p>

<p>1、<strong>创建仓库，命名有约定</strong>。例如我的 Github 的 <code>username</code> 为 <code>examplename</code> ，则仓库名为 <code>examplename.github.com</code></p>

<p>2、<strong>配置仓库的 page</strong>。 在 <code>Terminal</code> 运行：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake setup_github_pages
</span><span class='line'>或
</span><span class='line'>bundle exec rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p>按上述命令运行后的提示，输入正确的 Url。完成这些操作后，会有本地创建一个 <code>_deploy</code> 的目录，就是所谓的发布目录，后面全把目录内容上传到上述仓库 <code>examplename.github.com</code> 的 <code>master</code> 中。
下面就可以生成博客内容并拷贝至 <code>_deploy</code> 目录，并 <code>commit</code> 和 <code>push</code> 到 <code>master</code> 分支了，操作如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate 或 bundle exec rake generate
</span><span class='line'>rake deploy 或 bundle exec rake deploy</span></code></pre></td></tr></table></div></figure>


<p>博客的 <code>source</code> 需要单独提交到仓库的 <code>source</code> 分支上，操作如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ git add .
</span><span class='line'>$ git commit -m 'Initial source commit'
</span><span class='line'>$ git push origin source</span></code></pre></td></tr></table></div></figure>


<p>至此，博客部署完成了，<code>Github</code> 一般会有几分钟的延时才会生效，生效后，用浏览器访问 <code>http://examplename.github.com</code> 即可。</p>

<p>我们也可以在本机先睹为快，在部署前，可以先预览博客的模样，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake preview
</span><span class='line'>或
</span><span class='line'>bundle exec rake preview</span></code></pre></td></tr></table></div></figure>


<p>在浏览器打开 <code>http://127.0.0.1:4000</code>，是不是 amazing。</p>

<ul>
<li>5、<strong>如何添加新的文章</strong></li>
</ul>


<p>Octopress 已经提供了一些方式来创建博文和页面，目录存储和命令规范已经帮我们想好。博文放在 <code>source/_posts</code> 下，命令规范为 <code>YYYY-MM-DD-post-title.markdown</code> ，名称会当成博文 url 的一部分，并且名称的时间可能用来区分博文。</p>

<p>创建名为 <code>用Octopress免费搭建Github博客</code> 的博文，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake new_post["用Octopress免费搭建Github博客"]
</span><span class='line'>或
</span><span class='line'>bundle exec rake new_post["用Octopress免费搭建Github博客"]</span></code></pre></td></tr></table></div></figure>


<p>查看 <code>source/_posts</code>，会发现生成了 <code>2014-10-22-yong-octopressmian-fei-da-jian-githubbo-ke.markdown</code> 的文件，打开，内容如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>---
</span><span class='line'>layout: post
</span><span class='line'>title: "用Octopress免费搭建Github博客"
</span><span class='line'>date: 2014-10-22 22:30:17 +0800
</span><span class='line'>comments: true
</span><span class='line'>categories: Github //编码文件时加的，开始生成没有
</span><span class='line'>---</span></code></pre></td></tr></table></div></figure>


<p>之后就是在上述内容的下方，用 <code>markdown</code> 标签语言进行写博文了，建议使用 <code>LightPaper</code> 这个软件，网上好多说 <code>Mou</code> 不错，但这是以前，现在已经没落了，也已经卖出去了，记得在高的 <code>OS X</code> 版本下还有 Bug，支持也不好。</p>

<p>写完后保存，生成再部署，命令如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake generate 或 bundle exec rake generate
</span><span class='line'>$ rake preview 或 bundle exec rake preview //可选，本地预览
</span><span class='line'>$ git add .
</span><span class='line'>$ git commit -am "提交摘要说明" 
</span><span class='line'>$ git push origin source
</span><span class='line'>$ rake deploy 或 bundle exec rake deploy</span></code></pre></td></tr></table></div></figure>


<p>至此，发博文已经没问题了。</p>

<ul>
<li>5、<strong>如何绑定域名</strong></li>
</ul>


<p>如何你有自己的域名，可以进行绑定的，以我在 <a href="https://www.godaddy.com/">godaddy.com</a> 购买域名举例来说，操作如下：</p>

<p>1、<strong>购买域名</strong>。例如我的为 <code>www.wensj.net</code></p>

<p>2、<strong>配置DNS</strong>。</p>

<p>登录 godaddy.com 后，在已经购买域名的 DNS 设置项目(<code>DNS Zone file</code>)中，在 <code>A(host)</code> 中添加或修改一条记录，如 <code>Host 为 @, Points to 为 examplename.github.com对应的 ip 地址</code>;</p>

<p>在 <code>CName (Alias)</code> 中添加或个性一条记录，如 <code>Host 为 www，Points to 为 examplename.github.com</code>。</p>

<p>3、<strong>给Page指定域名</strong>。</p>

<p>在 <code>source</code> 目录下新建名为 <code>CNAME</code> 的文件，里面写上你的域名就行了，例如我的为 <code>www.wensj.net</code> ，然后把文件 <code>commit</code> 和 <code>push</code> 到 github 上。</p>

<p>完成上述配置后，慢慢等它生效就是了。</p>

<ul>
<li>5、<strong>如何添加评论模块</strong></li>
</ul>


<p>添加评论模块其它也挺简单，这里就不说了，我是用 <a href="https://disqus.com/">https://disqus.com</a> 的，注册一下，然后在 Octopress 配置一下，就差不多了，祝你好运。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-05-21T23:46:05+08:00" data-updated="true" itemprop="datePublished">May 21<span>st</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/jiao-ben-and-gong-ju/'>脚本&工具</a>


</div>
		
			<span class="comments"><a href="/blog/2014/05/21/chang-yong-de-adb-ming-ling/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/05/21/chang-yong-de-adb-ming-ling/" itemprop="url">常用的 ADB 命令</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>最近在搞 Andorid 开发，在调用的过程中，经常会用到 <code>ADB</code>，这里简单做个此命令使用频率较高的用法。</p>

<p><code>ADB</code> 全称是 <strong>Android Debug Bridge</strong>, 是 Android SDK 里的一个工具, 用它可以直接操作管理 Android 模拟器或者 Andriod 设备。</p>

<p>它的主要功能有:</p>

<blockquote><ul>
<li>运行设备的 shell 命令行</li>
<li>管理模拟器或设备的端口映射</li>
<li>计算机和设备之间上传/下载文件</li>
<li>将本地 apk 软件安装至模拟器或 Android 设备</li>
</ul>
</blockquote>

<hr />

<h2>常用的 ADB 命令</h2>

<ul>
<li><p>1、<strong>adb help</strong> 显示帮助信息</p></li>
<li><p>2、<strong>adb version</strong> 显示 ADB 命令版本号</p></li>
<li><p>3、<strong>adb devices</strong> 查看当前连接的设备,包括真机和模拟器</p></li>
<li><p>4、<strong>adb start-server</strong> 启动计算机 adb 服务进程，也可使用 adb devices 命令时自动开启</p></li>
<li><p>5、<strong>adb kill-server</strong> 关闭计算机 adb 服务进程，有时在正在使用的 adb，然后想删除 adb，那这时你得先关闭进程才了删除，就要用到它了</p></li>
<li><p>6、<strong>adb install [-r] [-s]</strong> 安装软件</p>

<p> <strong>－r</strong>强制安装（在某些情况下可以已有些应用程序在运行或不可写，可加上此参数强制安装）</p>

<p> <strong>－s</strong> 将 apk 文件安装在 SD-Card</p></li>
<li><p>7、<strong>adb uninstall [-k] &lt;软件名></strong> 卸载软件， -k 参数表示为卸载软件但是保留配置和缓存文件</p></li>
<li><p>8、<strong>adb push &lt;本地路径> &lt;远程路径></strong> 从电脑上发送文件到设备</p>

<p> 例：adb push recovery.img /sdcard/recovery.img，将本地目录中的 recovery.img 文件传送手机的 SD 卡中并取同样的文件名</p></li>
<li><p>9、<strong>adb pull &lt;远程路径> &lt;本地路径></strong> 从设备上下载文件到电脑</p></li>
<li><p>10、<strong>adb reboot [bootloader|recovery]</strong> 重启设备</p>

<p> 1）<strong>adb reboot</strong> 直接重启设备回到使用界面 ；</p>

<p> 2）<strong>adb reboot-bootloader</strong> 或 <strong>adb reboot bootloader</strong> 重启设备到 bootloader 引导模式：</p>

<p> 3）<strong>adb reboot recovery</strong>，重启到 <strong>recovery</strong> 刷机模式</p></li>
<li><p>11、<strong>adb get-state</strong> 返回设备状态，有三种结果：关机，引导模式，设备在线</p></li>
<li><p>12、<strong>adb get-serialno</strong> 返回设备序列号SN值</p></li>
<li><p>13、<strong>adb remount</strong> 获取设备的 ROOT 权限</p>

<p> 通过这个命令就可以获取设备的 ROOT 权限一样的通 adb 操作 /system 等目录的，如 adb push xx.app /system/app 即可将 app 应用直接放入系统目录，这个操作必须设备已解锁并 ROOT 过。</p></li>
<li><p>14、<strong>adb shell pm clear &lt;包名></strong> 清除应用数据，跟在设备上打开设置&mdash;应用&mdash;清除数据 是一样的效果。</p></li>
</ul>


<hr />

<p><a href="http://www.izhangheng.com/android-debug-bridge">文章参考: http://www.izhangheng.com/android-debug-bridge</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-05-14T21:52:40+08:00" data-updated="true" itemprop="datePublished">May 14<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/yi-nan-za-zheng/'>疑难杂症</a>


</div>
		
			<span class="comments"><a href="/blog/2014/05/14/unicode-de-huan-xing-fu-hao-e280a8-dao-zhi-js-bao-cuo/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/05/14/unicode-de-huan-xing-fu-hao-e280a8-dao-zhi-js-bao-cuo/" itemprop="url">Unicode 的换行符号 E280a8 导致 JS 报错</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>出现的现象</h3>

<p>项目是使用 <a href="http://cordova.apache.org/">phoneGap（现称 Cordova ）</a> 框架，<code>JS</code> 端 从 <code>Navite</code> 端获取到处理数据后，其实是段可执行的 <code>JS</code> 代码，当要执行它时，报 <strong>“SyntaxError: Unexpected token ILLEGAL”</strong> 的错误，意思是不合法的记号，代码无法再执行下去，使用肉眼在 <code>Linux</code> 下看到是空白行，在 <code>Windows</code> 下看到的是一些特殊字符， <a href="http://cordova.apache.org/">phoneGap</a> 的关键代码为</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// 获取到 Navite 端的处理结果</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;gap_poll:&quot;</span><span class="p">);</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// 用 eval 执行它</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">+</span><span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span><span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// catch 到错误是 SyntaxError: Unexpected token ILLEGAL</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;JSCallbackPolling: Message from Server: &quot;</span> <span class="o">+</span> <span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;JSCallbackPolling Error: &quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">},</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>问题分析</h3>

<p>怀疑就是此特殊字符引起的 <code>JS</code> 语法错误，经服务器的同学查证，发现此字符的 <code>UTF-8</code> 的编码是 <code>e280a8</code>，这货是什么呢？ <code>Google</code> 后发现它的 <code>Unicode</code> 编码是 <code>\u2028</code>，正是 <code>Unicode</code> 下的换行符号。此符号对于 <code>JS</code> 下执行 <code>eval</code> 函数时出错，造成语法错误。由于出现此问题的是线上环境，当时服务器同学已经把数据库有问题的那个用户的字段给修改好了，因此我决定使用代码来模拟一下，模拟的思路是：</p>

<blockquote><ul>
<li>用 <code>Java</code> 来创建一个包含 <code>Unicode</code> 编码的换行符号 <code>\u2028</code> 的字符串；></li>
<li>再转成 <code>UTF-8</code> 编码的字符串；</li>
<li>回传给 <code>JS</code> 端</li>
</ul>
</blockquote>

<p>代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">//Unicode编码的字符中，意义是”HelloWorld,*HelloWorld”,*代表\u2028,它代表Unicode下的换行符</span>
</span><span class='line'><span class="n">String</span> <span class="n">nicknameUnicode</span> <span class="o">=</span> <span class="s">&quot;\u0048\u0065\u006C\u006C\u006F World\u2028,\u0048\u0065\u006C\u006C\u006F World&quot;</span><span class="o">;</span>
</span><span class='line'><span class="n">String</span> <span class="n">nicknameUTF8</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'><span class="k">try</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//转成utf-8,这里就包括Unicode的换行符号，返回给js会报错</span>
</span><span class='line'>    <span class="n">nicknameUTF8</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">nicknameUnicode</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">&quot;UTF-8&quot;</span><span class="o">),</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 把这个 nicknameUTF-8传给JS端，代码非关键，就不贴了</span>
</span></code></pre></td></tr></table></div></figure>


<p>果然，<code>JS</code> 端同样报了 <strong>“SyntaxError: Unexpected token ILLEGAL”</strong> 的错误</p>

<h3>如何解决</h3>

<h4>方式一：Java端解决</h4>

<p>既然我们知道是 <code>Unicode</code> 的换行符号 <code>\u2028</code> 引起的，那就对症下药，把这个换行符号去掉就好了，因为项目用的是 <code>Java</code>，因此使用 <code>Java</code> 的方法去掉，其它语言应该也是一样的，只不过写法不同而已，发现这个换行符号用 <code>trim()</code> 方法是没法去除的，但可以用正则表达式去掉，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>
</span><span class='line'><span class="c1">//正则替换换行符号，假如\u2028放在首尾，用trim()方法，也是替换不了的</span>
</span><span class='line'><span class="n">nicknameUTF8</span> <span class="o">=</span> <span class="n">nicknameUTF8</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&quot;\\s*&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>好了，一切正常了。</p>

<h4>方式二：JS 端解决</h4>

<p>当从 <code>prompt</code> 函数拿到处理结果后，判断一下，如果存在这样的字符，则把它替换为空，再去执行 <code>eval</code> 函数，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// 获取到 Navite 端的处理结果</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;gap_poll:&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">lineBreakCharReg</span> <span class="o">=</span> <span class="sr">/\u2028|\u2029/g</span><span class="p">;</span>
</span><span class='line'><span class="c1">// 如果存在换行符号，则替换为空。</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">lineBreakCharReg</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">msg</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">msg</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">lineBreakCharReg</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// 用 eval 执行它</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">+</span><span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span><span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// catch 到错误是 SyntaxError: Unexpected token ILLEGAL</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;JSCallbackPolling: Message from Server: &quot;</span> <span class="o">+</span> <span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;JSCallbackPolling Error: &quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">},</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>小小总结</h3>

<blockquote><ul>
<li><code>JS</code> 从服务端或者客户端获取到结果时，特别要注意是否包括换行符号，包括 <code>Unicode</code> 和 <code>UTF-8</code> 等的编码的换行符号，因为会引起 <code>JS</code> 的语法问题；</li>
<li>那么其它的编码格式下的换行符号会不会也引起 <code>JS</code> 的语法问题呢？这里没有再进一步测试，有兴趣的可以试一下，告诉我，^_^；</li>
<li>正则 <code>\s</code> 可去掉 <code>Unicode</code> 和 <code>UTF-8</code> 的换行符号，其它的编码换行我猜也可以的。</li>
<li>后来经验证，\u2029也会导致这样的问题，这个是 <code>Unicode</code> 下的段换行符号。

<h3>参考的资料</h3></li>
</ul>
</blockquote>

<p><a href="http://stackoverflow.com/questions/10556875/list-of-unicode-characters-that-should-be-filtered-in-output">List of Unicode characters that should be filtered in output? &mdash;stackoverflow</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-05-11T23:15:17+08:00" data-updated="true" itemprop="datePublished">May 11<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2014/05/11/geng-fang-bian-di-shan-chu-suo-you-de-subview/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/05/11/geng-fang-bian-di-shan-chu-suo-you-de-subview/" itemprop="url">更方便地删除所有的subView</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<hr />

<p>参考出处：<a href="http://stackoverflow.com/questions/2156015/remove-all-subviews">http://stackoverflow.com/questions/2156015/remove-all-subviews</a></p>

<hr />

<h3>常用做法</h3>

<p>通常我们移除一个<code>View</code>中的所有subView，都会使用遍历的方式去移除，代码如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">UIView</span> <span class="o">*</span><span class="n">view</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">CGRectZero</span><span class="p">];</span>
</span><span class='line'><span class="n">UIButton</span> <span class="o">*</span><span class="n">button</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIButton</span> <span class="nl">buttonWithType:</span><span class="n">UIButtonTypeCustom</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">view</span> <span class="nl">addSubview:</span><span class="n">button</span><span class="p">];</span>
</span><span class='line'><span class="n">UIImageView</span> <span class="o">*</span><span class="n">imageview</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIImageView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">CGRectZero</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">view</span> <span class="nl">addSubview:</span><span class="n">imageview</span><span class="p">];</span>
</span><span class='line'><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;subview count is %ld&quot;</span><span class="p">,</span> <span class="n">view</span><span class="p">.</span><span class="n">subviews</span><span class="p">.</span><span class="n">count</span><span class="p">);</span><span class="c1">//输出2</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="kt">id</span> <span class="n">subview</span> <span class="k">in</span> <span class="n">view</span><span class="p">.</span><span class="n">subviews</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">subview</span> <span class="n">removeFromSuperview</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;subview count is %ld&quot;</span><span class="p">,</span> <span class="n">view</span><span class="p">.</span><span class="n">subviews</span><span class="p">.</span><span class="n">count</span><span class="p">);</span><span class="c1">//输出0</span>
</span></code></pre></td></tr></table></div></figure>


<h3>更方便的做法</h3>

<p>在<code>iOS</code>上的写法是：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">UIView</span> <span class="o">*</span><span class="n">view</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">CGRectZero</span><span class="p">];</span>
</span><span class='line'><span class="n">UIButton</span> <span class="o">*</span><span class="n">button</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIButton</span> <span class="nl">buttonWithType:</span><span class="n">UIButtonTypeCustom</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">view</span> <span class="nl">addSubview:</span><span class="n">button</span><span class="p">];</span>
</span><span class='line'><span class="n">UIImageView</span> <span class="o">*</span><span class="n">imageview</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIImageView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">CGRectZero</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">view</span> <span class="nl">addSubview:</span><span class="n">imageview</span><span class="p">];</span>
</span><span class='line'><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;subview count is %ld&quot;</span><span class="p">,</span> <span class="n">view</span><span class="p">.</span><span class="n">subviews</span><span class="p">.</span><span class="n">count</span><span class="p">);</span><span class="c1">//输出2</span>
</span><span class='line'><span class="c1">// 使用makeObjectPerformSelector</span>
</span><span class='line'><span class="p">[[</span><span class="n">view</span> <span class="n">subviews</span><span class="p">]</span> <span class="nl">makeObjectsPerformSelector:</span><span class="k">@selector</span><span class="p">(</span><span class="n">removeFromSuperview</span><span class="p">)];</span>
</span><span class='line'><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;subview count is %ld&quot;</span><span class="p">,</span> <span class="n">view</span><span class="p">.</span><span class="n">subviews</span><span class="p">.</span><span class="n">count</span><span class="p">);</span><span class="c1">//输出0</span>
</span></code></pre></td></tr></table></div></figure>


<p>在<code>Mac</code>上的做法是：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="p">[</span><span class="n">someNSView</span> <span class="nl">setSubviews:</span><span class="p">[</span><span class="n">NSArray</span> <span class="n">array</span><span class="p">]];</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-05-11T21:05:22+08:00" data-updated="true" itemprop="datePublished">May 11<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/fan-yi/'>翻译</a>


</div>
		
			<span class="comments"><a href="/blog/2014/05/11/ios-7mo-hu-ji-qiao/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/05/11/ios-7mo-hu-ji-qiao/" itemprop="url">iOS 7模糊技巧</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>原文出处：<a href="http://damir.me/ios7-blurring-techniques">http://damir.me/ios7-blurring-techniques</a></p>

<hr />

<p>你可能想在iOS 7上实现模糊的view，那么应该要怎么做呢？</p>

<h2>静态模糊（blur）</h2>

<p>要知道这并不是一种新的技术。它在iOS7之前的版本就可以使用，但是有限制的。主要的做法就是获取一个<code>view</code>的快照（即做成一张图片），然后把图片模糊化。</p>

<p>在iOS 6下获取快照使用<code>renderInContext:</code>方法，但它耗时很长，幸运的是，在iOS 7下在<code>view</code>里新增加了一个叫<code>drawViewHierarchyInRect:afterScreenUpdates:</code>的方法，它获得的效果是一样的。它能很快地获取一个<code>view</code>的快照。有多快？这里和<code>renderInContext:</code>方法对比一下。</p>

<p><img src="http://f.cl.ly/items/323c000h013V2f3R2p3b/Screen%20Shot%202013-09-16%20at%2001.12.37%20.png" alt="comparison-image" /></p>

<p>它比<code>renderInContext:</code>方法快了15倍。现在我们能获得一个快照了，那我们怎么做才能获得模糊的效果呢？<code>Apple</code>公司也帮我们封装好了方法。你可以通过<code>Apple</code>公司创建好的<code>UIImageEffects</code>这个<code>category</code>来获得模糊的效果。（找到<code>Sample Code</code>><code>and search for ImageEffects</code>）</p>

<hr />

<h2>例子</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// YourUIView.m (UIView)</span>
</span><span class='line'><span class="cp">#import &quot;UIImage+ImageEffects.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nf">blurredSnapshot</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// 创建图片的上下文</span>
</span><span class='line'>    <span class="n">UIGraphicsBeginImageContextWithOptions</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">,</span> <span class="n">NO</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">screen</span><span class="p">.</span><span class="n">scale</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 这个就是新的 API</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span> <span class="nl">drawViewHierarchyInRect:</span><span class="n">self</span><span class="p">.</span><span class="n">frame</span> <span class="nl">afterScreenUpdates:</span><span class="n">NO</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 获取快照</span>
</span><span class='line'>    <span class="n">UIImage</span> <span class="o">*</span><span class="n">snapshotImage</span> <span class="o">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 使用Apple的 UIImageEffect category 把模糊效果应用到图片中</span>
</span><span class='line'>    <span class="n">UIImage</span> <span class="o">*</span><span class="n">blurredSnapshotImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">snapshotImage</span> <span class="n">applyLightEffect</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 或者使用 &quot;UIImage+ImageEffects.h&quot; 中的其它效果</span>
</span><span class='line'>    <span class="c1">// UIImage *blurredSnapshotImage = [snapshotImage applyDarkEffect];</span>
</span><span class='line'>    <span class="c1">// UIImage *blurredSnapshotImage = [snapshotImage applyExtraLightEffect];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 清理一下</span>
</span><span class='line'>    <span class="n">UIGraphicsEndImageContext</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">blurredSnapshotImage</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>提示：Make it a <code>UIView</code> category if you plan to blur th <code>sh**</code> out of your application.（不懂sh**是什么，干脆直接上原话好了）</p>

<hr />

<h2>实时模糊（blur）</h2>

<p>你怎么才能做到像系统的控制中心或通知中心的那种实时模糊呢？<code>Apple</code>（经常但不总是）使用我们不能使用的自定义私有API来做的。</p>

<hr />

<h2>聪明的小技巧</h2>

<p><code>Andy Matuschak</code>指出，<code>Apple</code>是通过使用了一些小技巧，把静态的图片做到或者说是模拟到实时模糊的效果。这种小技巧的做法只是在旧的设备上(iPhone 5之前)使用的，在iPhone 5 上的模糊效果似乎是实时的，没有任何技巧。</p>

<p>然而，让我们拿通知中心（iOS 7上的）作为一个例子。他（<code>Andy Matuschak</code>）的意思是使用了技巧（我猜的），那就是获得了一个快照并从起点开始模糊它，并把它设置为通知中心的背景图。当用户拉下通知中心时，它通过增加背景图高度来模拟毛玻璃模糊效果。这给用户的印象就是实时的模糊效果。</p>

<hr />

<h2>UIToolbar</h2>

<p>最后同样重要的是，你可以更好地利用<code>UIToolbar</code> 这个类（而不是<code>UIView</code>）。确保你设置了<code>barStyle</code>属性为<code>UIBarStyleBlack</code>，<code>translucent</code>属性为<code>YES</code>。
你随意地调整<code>barTintColor</code>就行了！这样将会给你一个半透明实时模糊的view。</p>

<p>有没有一个更加优雅和简洁的解决办法呢？还真没有，<code>UIToolbar</code>只能当成一个toolbar使用。但是如果你真的想实时模糊<code>UIView</code>的而<code>Apple</code>又不提供这个API的话，它可能是唯一的方法了。它当然是不会被拒绝的。</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2015 - Wensj -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'wensj';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






		</div>
	</div>
</body>
</html>
